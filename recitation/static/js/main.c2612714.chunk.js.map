{"version":3,"sources":["usages/config.js","usages/colorUsage.js","sounds sync /.(mp3)$","sounds/s1/s1_1.mp3","sounds/s1/s1_10.mp3","sounds/s1/s1_11.mp3","sounds/s1/s1_12.mp3","sounds/s1/s1_13.mp3","sounds/s1/s1_14.mp3","sounds/s1/s1_15.mp3","sounds/s1/s1_2.mp3","sounds/s1/s1_3.mp3","sounds/s1/s1_4.mp3","sounds/s1/s1_5.mp3","sounds/s1/s1_6.mp3","sounds/s1/s1_7.mp3","sounds/s1/s1_8.mp3","sounds/s1/s1_9.mp3","sounds/s2/s2_1.mp3","sounds/s2/s2_10.mp3","sounds/s2/s2_11.mp3","sounds/s2/s2_12.mp3","sounds/s2/s2_13.mp3","sounds/s2/s2_14.mp3","sounds/s2/s2_15.mp3","sounds/s2/s2_16.mp3","sounds/s2/s2_17.mp3","sounds/s2/s2_18.mp3","sounds/s2/s2_19.mp3","sounds/s2/s2_2.mp3","sounds/s2/s2_20.mp3","sounds/s2/s2_3.mp3","sounds/s2/s2_4.mp3","sounds/s2/s2_5.mp3","sounds/s2/s2_6.mp3","sounds/s2/s2_7.mp3","sounds/s2/s2_8.mp3","sounds/s2/s2_9.mp3","sounds/s3/s3_1.mp3","sounds/s3/s3_2.mp3","sounds/s3/s3_3.mp3","sounds/s3/s3_4.mp3","sounds/s3/s3_5.mp3","sounds/s3/s3_6.mp3","sounds/s3/s3_7.mp3","sounds/s3/s3_8.mp3","sounds/s4/s4_1.mp3","sounds/s4/s4_10.mp3","sounds/s4/s4_2.mp3","sounds/s4/s4_3.mp3","sounds/s4/s4_4.mp3","sounds/s4/s4_5.mp3","sounds/s4/s4_6.mp3","sounds/s4/s4_7.mp3","sounds/s4/s4_8.mp3","sounds/s4/s4_9.mp3","sounds/s5/sample_1-1.mp3","sounds/s5/sample_1-2.mp3","sounds/s5/sample_1-3.mp3","sounds/s5/sample_1-4.mp3","sounds/s5/sample_1-5.mp3","sounds/s6/sample_2-1.mp3","sounds/s6/sample_2-2.mp3","sounds/s6/sample_2-3.mp3","sounds/s6/sample_2-4.mp3","sounds/s6/sample_2-5.mp3","usages/socketUsage.js","usages/tool.js","components/InfoPage.js","components/Fade.js","usages/cssUsage.js","usages/voiceUsage.js","components/Speak.js","components/AnimeBox.js","components/MusicBox.js","components/EffectBox.js","components/SocketHandler.js","components/LandPage.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","hsvToRgb","h","s","v","r","g","b","i","Math","floor","f","p","q","t","rgbToHsv","max","min","d","hslToRgb","l","hue2rgb","rgbToHsl","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","defaultSocket","defaultConnectFn","console","log","onSocket","str","fn","socket","undefined","on","emitData","name","data","emit","useInterval","callback","delay","savedCallback","useRef","useEffect","current","setInterval","clearInterval","usePrevious","value","ref","InfoSpan","styled","span","props","fontSize","fontWeight","color","InfoWrapper","div","Wave","myRef","React","createRef","state","siriWave","this","setState","SiriWave","container","style","width","height","speed","amplitude","autostart","setTimeout","setAmplitude","nextProps","nextState","start","Component","InfoPage","speaking","num","speakingVoice","length","forEach","JSON","parse","lang","personName","nameColor","sentence","Fade","show","children","useState","shouldRender","setRender","animation","onAnimationEnd","FullDiv","bgColor","excludeName","Set","SpeakForm","onSubmitF","voiceIndex","voiceOnChanged","voices","pitch","rate","pitchOnChanged","rateOnChanged","onSubmit","onChange","target","index","key","htmlFor","type","step","Speak","genVoice","synth","getVoices","prevName","has","splice","default","changeVoiceIdx","window","speechSynthesis","setVoices","setPitch","setRate","setSpeaking","toSpeak","changeVoice","prevSpeak","prevChangeVoice","revealSentence","setRevealSentence","text","speakTxtWithPR","random","changeVoiceCallback","onvoiceschanged","speakOver","speakTxt","txt","utterThis","SpeechSynthesisUtterance","voice","speak","formProps","event","preventDefault","form","nowSpeak","AnimeBox","defaultProp","easing","loop","duration","direction","endDelay","background","mode","opacity","refresh","light","alpha","colorTemp","loopTime","colorStr","stiffness","bg","substring","split","config","damping","spring","parseFloat","a","motionFunc","rgbMotion","Date","now","hslMotion","lightProp","computeData","animeProp","assign","genRgbStyle","motion","anime","soundStateNum","soundFiles","soundPlayer","context","require","count","prev","filename","slice","push","importSoundFiles","ind","temp","Tone","toMaster","MusicBoxMin","nowOrder","setNowOrder","setRefresh","processData","sound","processSound","loadFinish","onload","stop","stopAll","stringify","order","set","orderTo","stopNow","setVolume","volume","playSound","delayFix","loaded","rgbColors","genUUID","performance","uuid","replace","c","toString","sessionStorage","setItem","jsonCopy","jsonObj","EffectBox","getItem","refreshAnime","refreshMusic","socketData","lightData","soundData","opa","setupBeforeUnloadListener","addEventListener","clickButton","prevState","receiveControlData","bind","handleSocketData","handleLightData","MusicBox","SocketHandler","setSpeak","setId","setChangeVoice","launch","setLaunch","showForm","setShowForm","speakData","setSpeakData","setVoice","socketConnect","setSocketConnect","setNowSpeak","changeVoiceEffect","namespace","io","serverHost","connectSocket","LandPage","className","onClick","select","App","landing","setLanding","oscillator","triggerAttack","triggerRelease","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"wGAAAA,EAAOC,QAAU,8C,kBCkLjBD,EAAOC,QAAQC,SA/Cf,SAAkBC,EAAGC,EAAGC,GACtB,IAAIC,EAAGC,EAAGC,EAENC,EAAIC,KAAKC,MAAU,EAAJR,GACfS,EAAQ,EAAJT,EAAQM,EACZI,EAAIR,GAAK,EAAID,GACbU,EAAIT,GAAK,EAAIO,EAAIR,GACjBW,EAAIV,GAAK,GAAK,EAAIO,GAAKR,GAE3B,OAAQK,EAAI,GACV,KAAK,EACHH,EAAID,EACJE,EAAIQ,EACJP,EAAIK,EACJ,MACF,KAAK,EACHP,EAAIQ,EACJP,EAAIF,EACJG,EAAIK,EACJ,MACF,KAAK,EACHP,EAAIO,EACJN,EAAIF,EACJG,EAAIO,EACJ,MACF,KAAK,EACHT,EAAIO,EACJN,EAAIO,EACJN,EAAIH,EACJ,MACF,KAAK,EACHC,EAAIS,EACJR,EAAIM,EACJL,EAAIH,EACJ,MACF,KAAK,EACHC,EAAID,EACJE,EAAIM,EACJL,EAAIM,EAMR,MAAO,CAACR,EAAM,IAAJA,EAASC,EAAM,IAAJA,EAASC,EAAM,IAAJA,IAIlCR,EAAOC,QAAQe,SA7Ff,SAAkBV,EAAGC,EAAGC,GACtBF,GAAK,IACLC,GAAK,IACLC,GAAK,IAEL,IACIL,EAAGC,EADHa,EAAMP,KAAKO,IAAIX,EAAGC,EAAGC,GAAIU,EAAMR,KAAKQ,IAAIZ,EAAGC,EAAGC,GACxCH,EAAIY,EAEVE,EAAIF,EAAMC,EAGd,GAFAd,EAAY,IAARa,EAAY,EAAIE,EAAIF,EAEpBA,IAAQC,EACVf,EAAI,MACC,CACL,OAAQc,GACN,KAAKX,EACHH,GAAKI,EAAIC,GAAKW,GAAKZ,EAAIC,EAAI,EAAI,GAC/B,MACF,KAAKD,EACHJ,GAAKK,EAAIF,GAAKa,EAAI,EAClB,MACF,KAAKX,EACHL,GAAKG,EAAIC,GAAKY,EAAI,EAMtBhB,GAAK,EAGP,MAAO,CAAEA,EAAEA,EAAGC,EAAEA,EAAGC,EAAEA,IA+DvBL,EAAOC,QAAQmB,SAnIf,SAAkBjB,EAAGC,EAAGiB,GACtB,IAAIf,EAAGC,EAAGC,EAEV,GAAS,GAALJ,EACFE,EAAIC,EAAIC,EAAIa,MACP,CAAC,IACGC,EAAT,SAAiBT,EAAGC,EAAGC,GAGrB,OAFIA,EAAI,IAAGA,GAAK,GACZA,EAAI,IAAGA,GAAK,GACZA,EAAI,EAAE,EAAUF,EAAc,GAATC,EAAID,GAASE,EAClCA,EAAI,GAAYD,EAChBC,EAAI,EAAE,EAAUF,GAAKC,EAAID,IAAM,EAAE,EAAIE,GAAK,EACvCF,GAGLC,EAAIO,EAAI,GAAMA,GAAK,EAAIjB,GAAKiB,EAAIjB,EAAIiB,EAAIjB,EACxCS,EAAI,EAAIQ,EAAIP,EAEhBR,EAAIgB,EAAQT,EAAGC,EAAGX,EAAI,EAAE,GACxBI,EAAIe,EAAQT,EAAGC,EAAGX,GAClBK,EAAIc,EAAQT,EAAGC,EAAGX,EAAI,EAAE,GAG1B,MAAO,CAACG,EAAM,IAAJA,EAASC,EAAM,IAAJA,EAASC,EAAM,IAAJA,IA6GlCR,EAAOC,QAAQsB,SA1Kf,SAAkBjB,EAAGC,EAAGC,GACtBF,GAAK,IACLC,GAAK,IACLC,GAAK,IAEL,IACIL,EAAGC,EADHa,EAAMP,KAAKO,IAAIX,EAAGC,EAAGC,GAAIU,EAAMR,KAAKQ,IAAIZ,EAAGC,EAAGC,GACxCa,GAAKJ,EAAMC,GAAO,EAE5B,GAAID,IAAQC,EACVf,EAAIC,EAAI,MACH,CACL,IAAIe,EAAIF,EAAMC,EAGd,OAFAd,EAAIiB,EAAI,GAAMF,GAAK,EAAIF,EAAMC,GAAOC,GAAKF,EAAMC,GAEvCD,GACN,KAAKX,EAAGH,GAAKI,EAAIC,GAAKW,GAAKZ,EAAIC,EAAI,EAAI,GAAI,MAC3C,KAAKD,EAAGJ,GAAKK,EAAIF,GAAKa,EAAI,EAAG,MAC7B,KAAKX,EAAGL,GAAKG,EAAIC,GAAKY,EAAI,EAI5BhB,GAAK,EAGP,MAAO,CAACA,EAAEA,EAAGC,EAAEA,EAAGiB,EAAEA,K,0JCnCtB,IAAIG,EAAM,CACT,gBAAiB,GACjB,iBAAkB,GAClB,iBAAkB,GAClB,iBAAkB,GAClB,iBAAkB,GAClB,iBAAkB,GAClB,iBAAkB,GAClB,gBAAiB,GACjB,gBAAiB,GACjB,gBAAiB,GACjB,gBAAiB,GACjB,gBAAiB,GACjB,gBAAiB,GACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,gBAAiB,IACjB,iBAAkB,IAClB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,iBAAkB,IAClB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,gBAAiB,IACjB,sBAAuB,IACvB,sBAAuB,IACvB,sBAAuB,IACvB,sBAAuB,IACvB,sBAAuB,IACvB,sBAAuB,IACvB,sBAAuB,IACvB,sBAAuB,IACvB,sBAAuB,IACvB,sBAAuB,KAIxB,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzB5B,EAAOC,QAAUwB,EACjBA,EAAeE,GAAK,I,gBCpFpB3B,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBC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","file":"static/js/main.c2612714.chunk.js","sourcesContent":["module.exports = 'https://stage-effect-server1.herokuapp.com';\n\n","/**\r\n * Converts an RGB color value to HSL. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes r, g, and b are contained in the set [0, 255] and\r\n * returns h, s, and l in the set [0, 1].\r\n *\r\n * @param   Number  r       The red color value\r\n * @param   Number  g       The green color value\r\n * @param   Number  b       The blue color value\r\n * @return  Array           The HSL representation\r\n */\r\nfunction rgbToHsl(r, g, b) {\r\n  r /= 255;\r\n  g /= 255;\r\n  b /= 255;\r\n\r\n  var max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n  var h, s, l = (max + min) / 2;\r\n\r\n  if (max === min) {\r\n    h = s = 0; // achromatic\r\n  } else {\r\n    var d = max - min;\r\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n\r\n    switch (max) {\r\n      case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n      case g: h = (b - r) / d + 2; break;\r\n      case b: h = (r - g) / d + 4; break;\r\n      default: break;\r\n    }\r\n\r\n    h /= 6;\r\n  }\r\n\r\n  return {h:h, s:s, l:l};\r\n}\r\n\r\n/**\r\n * Converts an HSL color value to RGB. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes h, s, and l are contained in the set [0, 1] and\r\n * returns r, g, and b in the set [0, 255].\r\n *\r\n * @param   Number  h       The hue\r\n * @param   Number  s       The saturation\r\n * @param   Number  l       The lightness\r\n * @return  Array           The RGB representation\r\n */\r\nfunction hslToRgb(h, s, l) {\r\n  var r, g, b;\r\n\r\n  if (s == 0) {\r\n    r = g = b = l; // achromatic\r\n  } else {\r\n    function hue2rgb(p, q, t) {\r\n      if (t < 0) t += 1;\r\n      if (t > 1) t -= 1;\r\n      if (t < 1/6) return p + (q - p) * 6 * t;\r\n      if (t < 1/2) return q;\r\n      if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;\r\n      return p;\r\n    }\r\n\r\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n    var p = 2 * l - q;\r\n\r\n    r = hue2rgb(p, q, h + 1/3);\r\n    g = hue2rgb(p, q, h);\r\n    b = hue2rgb(p, q, h - 1/3);\r\n  }\r\n\r\n  return {r:r * 255, g:g * 255, b:b * 255};\r\n}\r\n\r\n/**\r\n * Converts an RGB color value to HSV. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\r\n * Assumes r, g, and b are contained in the set [0, 255] and\r\n * returns h, s, and v in the set [0, 1].\r\n *\r\n * @param   Number  r       The red color value\r\n * @param   Number  g       The green color value\r\n * @param   Number  b       The blue color value\r\n * @return  Array           The HSV representation\r\n */\r\nfunction rgbToHsv(r, g, b) {\r\n  r /= 255;\r\n  g /= 255;\r\n  b /= 255;\r\n\r\n  var max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n  var h, s, v = max;\r\n\r\n  var d = max - min;\r\n  s = max === 0 ? 0 : d / max;\r\n\r\n  if (max === min) {\r\n    h = 0; // achromatic\r\n  } else {\r\n    switch (max) {\r\n      case r: \r\n        h = (g - b) / d + (g < b ? 6 : 0); \r\n        break;\r\n      case g: \r\n        h = (b - r) / d + 2; \r\n        break;\r\n      case b: \r\n        h = (r - g) / d + 4; \r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    h /= 6;\r\n  }\r\n\r\n  return { h:h, s:s, v:v };\r\n}\r\n\r\n/**\r\n * Converts an HSV color value to RGB. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\r\n * Assumes h, s, and v are contained in the set [0, 1] and\r\n * returns r, g, and b in the set [0, 255].\r\n *\r\n * @param   Number  h       The hue\r\n * @param   Number  s       The saturation\r\n * @param   Number  v       The value\r\n * @return  Array           The RGB representation\r\n */\r\nfunction hsvToRgb(h, s, v) {\r\n  var r, g, b;\r\n\r\n  var i = Math.floor(h * 6);\r\n  var f = h * 6 - i;\r\n  var p = v * (1 - s);\r\n  var q = v * (1 - f * s);\r\n  var t = v * (1 - (1 - f) * s);\r\n\r\n  switch (i % 6) {\r\n    case 0: \r\n      r = v;\r\n      g = t;\r\n      b = p;\r\n      break;\r\n    case 1: \r\n      r = q;\r\n      g = v;\r\n      b = p; \r\n      break;\r\n    case 2: \r\n      r = p;\r\n      g = v;\r\n      b = t; \r\n      break;\r\n    case 3: \r\n      r = p;\r\n      g = q;\r\n      b = v; \r\n      break;\r\n    case 4: \r\n      r = t; \r\n      g = p;\r\n      b = v; \r\n      break;\r\n    case 5: \r\n      r = v;\r\n      g = p;\r\n      b = q; \r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return {r:r * 255, g:g * 255, b:b * 255};\r\n}\r\n\r\nmodule.exports.hsvToRgb = hsvToRgb;\r\nmodule.exports.rgbToHsv = rgbToHsv;\r\nmodule.exports.hslToRgb = hslToRgb;\r\nmodule.exports.rgbToHsl = rgbToHsl;\r\n","var map = {\n\t\"./s1/s1_1.mp3\": 87,\n\t\"./s1/s1_10.mp3\": 88,\n\t\"./s1/s1_11.mp3\": 89,\n\t\"./s1/s1_12.mp3\": 90,\n\t\"./s1/s1_13.mp3\": 91,\n\t\"./s1/s1_14.mp3\": 92,\n\t\"./s1/s1_15.mp3\": 93,\n\t\"./s1/s1_2.mp3\": 94,\n\t\"./s1/s1_3.mp3\": 95,\n\t\"./s1/s1_4.mp3\": 96,\n\t\"./s1/s1_5.mp3\": 97,\n\t\"./s1/s1_6.mp3\": 98,\n\t\"./s1/s1_7.mp3\": 99,\n\t\"./s1/s1_8.mp3\": 100,\n\t\"./s1/s1_9.mp3\": 101,\n\t\"./s2/s2_1.mp3\": 102,\n\t\"./s2/s2_10.mp3\": 103,\n\t\"./s2/s2_11.mp3\": 104,\n\t\"./s2/s2_12.mp3\": 105,\n\t\"./s2/s2_13.mp3\": 106,\n\t\"./s2/s2_14.mp3\": 107,\n\t\"./s2/s2_15.mp3\": 108,\n\t\"./s2/s2_16.mp3\": 109,\n\t\"./s2/s2_17.mp3\": 110,\n\t\"./s2/s2_18.mp3\": 111,\n\t\"./s2/s2_19.mp3\": 112,\n\t\"./s2/s2_2.mp3\": 113,\n\t\"./s2/s2_20.mp3\": 114,\n\t\"./s2/s2_3.mp3\": 115,\n\t\"./s2/s2_4.mp3\": 116,\n\t\"./s2/s2_5.mp3\": 117,\n\t\"./s2/s2_6.mp3\": 118,\n\t\"./s2/s2_7.mp3\": 119,\n\t\"./s2/s2_8.mp3\": 120,\n\t\"./s2/s2_9.mp3\": 121,\n\t\"./s3/s3_1.mp3\": 122,\n\t\"./s3/s3_2.mp3\": 123,\n\t\"./s3/s3_3.mp3\": 124,\n\t\"./s3/s3_4.mp3\": 125,\n\t\"./s3/s3_5.mp3\": 126,\n\t\"./s3/s3_6.mp3\": 127,\n\t\"./s3/s3_7.mp3\": 128,\n\t\"./s3/s3_8.mp3\": 129,\n\t\"./s4/s4_1.mp3\": 130,\n\t\"./s4/s4_10.mp3\": 131,\n\t\"./s4/s4_2.mp3\": 132,\n\t\"./s4/s4_3.mp3\": 133,\n\t\"./s4/s4_4.mp3\": 134,\n\t\"./s4/s4_5.mp3\": 135,\n\t\"./s4/s4_6.mp3\": 136,\n\t\"./s4/s4_7.mp3\": 137,\n\t\"./s4/s4_8.mp3\": 138,\n\t\"./s4/s4_9.mp3\": 139,\n\t\"./s5/sample_1-1.mp3\": 140,\n\t\"./s5/sample_1-2.mp3\": 141,\n\t\"./s5/sample_1-3.mp3\": 142,\n\t\"./s5/sample_1-4.mp3\": 143,\n\t\"./s5/sample_1-5.mp3\": 144,\n\t\"./s6/sample_2-1.mp3\": 145,\n\t\"./s6/sample_2-2.mp3\": 146,\n\t\"./s6/sample_2-3.mp3\": 147,\n\t\"./s6/sample_2-4.mp3\": 148,\n\t\"./s6/sample_2-5.mp3\": 149\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 86;","module.exports = __webpack_public_path__ + \"static/media/s1_1.ea669680.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_10.86731729.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_11.95383e2b.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_12.3062e67b.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_13.b223aab5.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_14.425a4fa9.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_15.fb288ce4.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_2.11641a51.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_3.9a7edbf0.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_4.fd8f3b17.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_5.1715ef81.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_6.eb1c2009.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_7.3fd68304.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_8.137fa916.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s1_9.58675f81.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_1.61d94d7a.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_10.32934c47.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_11.4525b266.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_12.256207f1.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_13.ce7afcc0.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_14.1bd26a4b.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_15.469f9148.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_16.0dbcbb7b.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_17.b670b4ad.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_18.6abec9c8.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_19.7e1a4507.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_2.10b42381.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_20.7cf882bb.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_3.9d064e7e.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_4.d96ad941.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_5.6f1abd87.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_6.39526b5b.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_7.b3c61a37.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_8.310685bd.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s2_9.aa5ed891.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s3_1.f3c77ca9.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s3_2.56239431.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s3_3.ee87a362.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s3_4.b929912a.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s3_5.fa7be430.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s3_6.1f115ecb.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s3_7.3e651505.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s3_8.eec7224c.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s4_1.0392c9c6.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s4_10.31489083.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s4_2.fc63c56a.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s4_3.03a1916a.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s4_4.1572c20f.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s4_5.f386648a.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s4_6.ab563acd.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s4_7.62744ba7.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s4_8.bcb0d03f.mp3\";","module.exports = __webpack_public_path__ + \"static/media/s4_9.b75fdf32.mp3\";","module.exports = __webpack_public_path__ + \"static/media/sample_1-1.13028553.mp3\";","module.exports = __webpack_public_path__ + \"static/media/sample_1-2.7650b135.mp3\";","module.exports = __webpack_public_path__ + \"static/media/sample_1-3.8790d909.mp3\";","module.exports = __webpack_public_path__ + \"static/media/sample_1-4.f9bb29ba.mp3\";","module.exports = __webpack_public_path__ + \"static/media/sample_1-5.342b425b.mp3\";","module.exports = __webpack_public_path__ + \"static/media/sample_2-1.a54a1452.mp3\";","module.exports = __webpack_public_path__ + \"static/media/sample_2-2.91e0a60f.mp3\";","module.exports = __webpack_public_path__ + \"static/media/sample_2-3.cbac8904.mp3\";","module.exports = __webpack_public_path__ + \"static/media/sample_2-4.563c08ed.mp3\";","module.exports = __webpack_public_path__ + \"static/media/sample_2-5.6922cc24.mp3\";","import io from 'socket.io-client'\r\nimport {serverHost} from './config'\r\n\r\nlet defaultSocket;\r\nlet isSocketConnect = false;\r\n\r\nlet defaultConnectFn = () => {\r\n    isSocketConnect = true;\r\n    console.log('socket connect to server');\r\n}\r\n\r\n/**\r\n * set default socket for later use.\r\n *\r\n * @param   Socket  socket\r\n */\r\nexport let setDefaultSocket = (socket)=> {\r\n    defaultSocket = socket;\r\n}\r\n\r\n/**\r\n * connect socket with namespace, execute fn function after connect.\r\n *\r\n * @param   String  namespace     The namespace of socket io\r\n * @param   Function  fn          The function to be execute after connection\r\n * @return  Socket                The willing connect socket;\r\n */\r\nexport let connectSocket = (namespace='', fn=defaultConnectFn)=> {\r\n\r\n    let socket = io(serverHost+namespace);\r\n    if (defaultSocket === undefined) defaultSocket = socket;\r\n    socket.on('connect', fn);\r\n    return socket;\r\n}\r\n\r\n/**\r\n * on\r\n *\r\n * @param   String      str          The namespace of socket io\r\n * @param   Function    fn          The function to be execute after connection\r\n * @return  Socket                  The willing connect socket;\r\n */\r\nexport let onSocket = (str, fn, socket=defaultSocket)=> {\r\n    if (defaultSocket === undefined) return;\r\n    socket.on(str, fn);\r\n}\r\n\r\n/**\r\n * Emit Socket with name 'osc'\r\n *\r\n * @param   String  address     The specified address string\r\n * @param   Json  value         The values in JSON format\r\n */\r\nexport let emitOSC = (address, value, socket=defaultSocket)=> {\r\n    socket.emit('osc', {\r\n        address: address,\r\n        args: [value]\r\n    });\r\n}\r\n\r\n/**\r\n * Emit Socket with name and data\r\n *\r\n * @param   String  name     The name for socket emit\r\n * @param   Json  data       The emit data in JSON format\r\n */\r\nexport let emitData = (name, data, socket=defaultSocket)=> {\r\n    socket.emit(name, data);\r\n}\r\n\r\nexport {isSocketConnect};","import { useEffect, useRef } from 'react';\r\n\r\nexport function useInterval(callback, delay) {\r\n  const savedCallback = useRef();\r\n\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  });\r\n\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      let id = setInterval(tick, delay);\r\n      return () => clearInterval(id);\r\n    }\r\n  }, [delay]);\r\n}\r\n\r\nexport function usePrevious(value) {\r\n  // The ref object is a generic container whose current property is mutable ...\r\n  // ... and can hold any value, similar to an instance property on a class\r\n  const ref = useRef();\r\n  \r\n  // Store current value in ref\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  }, [value]); // Only re-run if value changes\r\n  \r\n  // Return previous value (happens before update in useEffect above)\r\n  return ref.current;\r\n}","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport SiriWave from 'siriwave';\r\nimport '../css/InfoPage.css';\r\n\r\n// css styled component\r\nconst InfoSpan = styled.span`\r\n    margin: 1em;\r\n    width: 80%;\r\n    text-align: center;\r\n    min-height: 1.2em;\r\n    font-size: ${props => \r\n        props.fontSize === undefined ? '3em' : props.fontSize};\r\n    font-weight: ${props => \r\n        props.fontWeight === undefined ? '200' : props.fontWeight};\r\n    ${props => \r\n        props.color === undefined ? '' : 'color:'+props.color+';'}\r\n    `;\r\nconst InfoWrapper = styled.div`\r\n    margin: 0 auto;\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    display:flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    `;\r\n\r\n\r\nfunction InfoPage(props) {\r\n    const maxLen = 10;\r\n    let speaking = '';\r\n    let num = 0;\r\n    if (props.speakingVoice.length > 0) {\r\n        props.speakingVoice.forEach((v)=>{\r\n            if (v == null) return;\r\n            v = JSON.parse(v);\r\n            if (!v.name) return;\r\n            if (num > maxLen) {\r\n                return;\r\n            }\r\n            if (`${v.name} (${v.lang})` !== props.personName) {\r\n                num++;\r\n                if (num > 1) speaking += num == maxLen ? ' and ' : ', ';\r\n                speaking += v.name;\r\n            }\r\n        })\r\n        if (num > 0) {\r\n            speaking += num > 1 ? ' are ' : ' is ';\r\n            speaking += 'speaking...';\r\n        }\r\n    }\r\n    \r\n    return (\r\n    <InfoWrapper>\r\n        <InfoSpan color={props.nameColor}>{props.personName}</InfoSpan>\r\n        <InfoSpan color={'purple'} fontSize={'2em'} fontWeight={'300'}>\r\n            {props.sentence === '' ? '' : `\"${props.sentence}\"`}\r\n        </InfoSpan>\r\n        <InfoSpan color={'gray'} fontSize={'1.5em'}>{speaking}</InfoSpan>\r\n        <Wave start={props.sentence === '' ? false : true}/>\r\n    </InfoWrapper>);\r\n}\r\n\r\nclass Wave extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.myRef = React.createRef();\r\n        this.state = {\r\n            siriWave: null,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({siriWave:new SiriWave({\r\n            container: this.myRef.current,\r\n            style: 'ios9',\r\n            width: 320,\r\n            height: 100,\r\n            //cover: true,\r\n            speed: 0.2,\r\n            amplitude: 0.1,\r\n            autostart: true\r\n        })})\r\n        setTimeout(()=>{\r\n            if (this.state.siriWave)\r\n                this.state.siriWave.setAmplitude(0);\r\n        }, 50)\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if (this.state.siriWave == null) return false;\r\n        if (nextProps.start !== this.props.start) {\r\n            if (nextProps.start) this.state.siriWave.setAmplitude(1);\r\n            else this.state.siriWave.setAmplitude(0);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        return (<>\r\n            <div ref={this.myRef}></div>\r\n        </>);\r\n    }\r\n  }\r\n\r\nexport default InfoPage;\r\n","import React, { useEffect, useState } from \"react\";\r\n\r\nconst Fade = ({ show, speed, children }) => {\r\n    if (speed === undefined) speed = \"0.5s\";\r\n    const [shouldRender, setRender] = useState(show);\r\n\r\n    useEffect(() => {\r\n        if (show) setRender(true);\r\n    }, [show]);\r\n\r\n    const onAnimationEnd = () => {\r\n        if (!show) setRender(false);\r\n    };\r\n\r\n    return (\r\n        shouldRender && (\r\n        <div\r\n            style={{ animation: `${show ? \"fadeIn\" : \"fadeOut\"} ${speed}` }}\r\n            onAnimationEnd={onAnimationEnd}\r\n        >\r\n            {children}\r\n        </div>\r\n        )\r\n    );\r\n};\r\n\r\nexport default Fade;","import styled from 'styled-components'\r\n\r\nexport const FullDiv = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  display:flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: -10;\r\n  background: ${props => \r\n    props.bgColor === undefined ? \"white\" : props.bgColor};  \r\n`;","export let excludeName = new Set([\r\n    'Amelie', 'Ioana', 'Joana', 'Laura', 'Sara', 'Xander', 'Jorge', 'Diego', 'Satu', 'Alice', 'Luciana', 'Mariska',\r\n]);\r\n\r\nexport let excludeLang = new Set([\r\n    'fr-CA', 'ro-RO', 'pt-PT', 'sk-SK', 'da-DK', 'nl-NL'\r\n]);","import React, {useState, useEffect} from 'react';\r\nimport { useInterval, usePrevious } from '../usages/tool';\r\nimport InfoPage from './InfoPage';\r\nimport Fade from './Fade';\r\nimport {FullDiv} from '../usages/cssUsage';\r\nimport {excludeName} from '../usages/voiceUsage';\r\n\r\n\r\nfunction Speak(props) {\r\n  let genVoice = () => {\r\n    let v = synth.getVoices();\r\n    let prevName = '';\r\n    console.log(v.length);\r\n    for (var i=0; i<v.length; i++) {\r\n      while (i<v.length && (excludeName.has(v[i].name) || v[i].name === prevName)) v.splice(i, 1);\r\n      if (i < v.length) {\r\n        prevName = v[i].name;\r\n        if (v[i].default) changeVoiceIdx(i);\r\n      }\r\n    }\r\n    return v;\r\n  }\r\n\r\n  const synth = window.speechSynthesis;  \r\n  const [voiceIndex, changeVoiceIdx] = useState(0);\r\n  const [voices, setVoices] = useState(()=>{return genVoice();});\r\n  const [pitch, setPitch] = useState(1);\r\n  const [rate, setRate] = useState(1);\r\n  const [speaking, setSpeaking] = useState(false);\r\n\r\n  //const [sentence, setSentence] = useState('');\r\n  const {toSpeak, data, changeVoice} = props;\r\n  const prevSpeak = usePrevious(toSpeak);\r\n  const prevChangeVoice = usePrevious(changeVoice);\r\n  const [revealSentence, setRevealSentence] = useState('');\r\n\r\n  useEffect(()=>{\r\n    if (!toSpeak || speaking) return;\r\n    if (prevSpeak !== toSpeak && data.text) {\r\n      if (data.rate) setRate(data.rate);\r\n      if (data.pitch) setPitch(data.pitch);\r\n      //speakTxt(data.text);\r\n      speakTxtWithPR(data.text, data.pitch?data.pitch:pitch, data.rate?data.rate:rate);\r\n    }\r\n  }, [toSpeak, data]);\r\n\r\n  useEffect(()=>{\r\n    if (prevChangeVoice !== changeVoice) {\r\n      changeVoiceIdx(Math.floor(Math.random()*voices.length));\r\n    }\r\n  }, [changeVoice]);\r\n\r\n  useEffect(()=>{\r\n    props.changeVoiceCallback({name:voices[voiceIndex].name, lang:voices[voiceIndex].lang});\r\n  }, [voiceIndex]);\r\n\r\n  let populateVoice = () => {\r\n    setVoices(genVoice());\r\n  }\r\n  synth.onvoiceschanged = populateVoice;\r\n  useInterval(() => {\r\n    if (!synth.speaking) {\r\n        //console.log('finish speak!');\r\n        props.speakOver();\r\n        setSpeaking(false);\r\n        setRevealSentence(\"\");\r\n    }\r\n  }, speaking ? 100 : null);\r\n\r\n  let submitSpeak = (event) => {\r\n    event.preventDefault();\r\n    speakTxt('hello');\r\n  }\r\n\r\n  let speakTxt = (txt) => {\r\n    setSpeaking(true);\r\n    setRevealSentence(txt);\r\n    let utterThis = new SpeechSynthesisUtterance(txt);\r\n    utterThis.voice = voices[voiceIndex];\r\n    utterThis.pitch = pitch;\r\n    utterThis.rate = rate;\r\n    synth.speak(utterThis);\r\n  }\r\n\r\n  let speakTxtWithPR = (txt, p, r) => {\r\n    setSpeaking(true);\r\n    setRevealSentence(txt);\r\n    let utterThis = new SpeechSynthesisUtterance(txt);\r\n    utterThis.voice = voices[voiceIndex];\r\n    utterThis.pitch = p;\r\n    utterThis.rate = r;\r\n    synth.speak(utterThis);\r\n  }\r\n\r\n  const formProps = {\r\n    onSubmitF: submitSpeak,\r\n    voiceIndex: voiceIndex, \r\n    voiceOnChanged: changeVoiceIdx, \r\n    voices: voices, \r\n    pitch: pitch, \r\n    rate: rate, \r\n    pitchOnChanged: setPitch, \r\n    rateOnChanged: setRate\r\n  }\r\n\r\n  let personName = voices[voiceIndex] !== undefined ? \r\n        `${voices[voiceIndex].name} (${voices[voiceIndex].lang})` : '';\r\n\r\n  return (\r\n    <>\r\n      {props.form && <SpeakForm {...formProps}/>}\r\n      <InfoPage personName={personName} \r\n        sentence={revealSentence} speakingVoice={props.nowSpeak} nameColor={speaking ? 'black': 'white'} /> \r\n      <Fade show={speaking} speed={'0.3s'}>\r\n        <FullDiv/>\r\n      </Fade>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction SpeakForm(props) {\r\n  const {onSubmitF, voiceIndex, \r\n        voiceOnChanged, voices, pitch, rate, \r\n        pitchOnChanged, rateOnChanged} = props;\r\n  return (\r\n    <form onSubmit={onSubmitF}>\r\n      <select value={voiceIndex} onChange={(e) => {voiceOnChanged(e.target.value)}}>\r\n        {voices.map((value, index) => {\r\n          return <option key={index} value={index}>{`${value.name} (${value.lang})`}</option>\r\n        })}\r\n      </select>\r\n      <br/>\r\n      <label htmlFor='pitch'>pitch</label>\r\n      <input type='number' step={0.01} value={pitch} onChange={(e)=>{pitchOnChanged(e.target.value)}} id='pitch' />\r\n      <br/>\r\n      <label htmlFor='rate'>rate</label>\r\n      <input type='number' step={0.01} value={rate}  onChange={(e)=>{rateOnChanged(e.target.value)}} id='rate'/>\r\n      <input type='submit'></input>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default Speak;\r\n","import React, {Component} from \"react\";\r\nimport Anime from \"react-anime\";\r\nimport { Motion, spring} from \"react-motion\";\r\nimport {rgbToHsl} from \"../usages/colorUsage\";\r\nimport '../css/AnimeBox.css';\r\nimport styled from 'styled-components';\r\n\r\nconst LightBox = styled.div `\r\n\tbackground: rgba(0,0,0,1);\r\n\tposition: absolute;\r\n\tmargin: 0;\r\n\ttop: 0px;\r\n\tleft: 0px;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tz-index: -1;\r\n`;\r\n\r\nclass AnimeBox extends Component {\r\n\r\n\tstate = {\r\n\t\tdefaultProp : {\r\n\t\t\teasing: \"easeInOutQuad\",\r\n\t\t\tloop: 2,\r\n\t\t\tduration: 500,\r\n\t\t\tdirection: \"alternate\",\r\n\t\t\tdelay: 0,\r\n\t\t\tendDelay: 0,\r\n\t\t\tbackground: \"rgba(0,0,0,1)\"\r\n\t\t}\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\t// only render when refresh animation\r\n\t\t// if (\"mode\" in nextProps.data){\r\n\t\t// \tif (nextProps.data.mode == \"follow\" \r\n\t\t// \t\t\r\n\t\t// }\r\n\t\tif (nextProps.data.mode == \"follow\"\r\n\t\t\t&& nextProps.opacity != this.props.opacity) {\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn (nextProps.refresh !== this.props.refresh);\r\n\t}\r\n\r\n\tcomputeData(light) {\r\n\t\t//TODO: check if QQ?\r\n\t\t//TODO: if first time is follw: QQ?\r\n\r\n\t\tlet alpha = 0;\r\n\t\t//console.log(`<background ?> ${JSON.stringify(light)}`);\r\n\t\tif (\"color\" in light) {\r\n\t\t\tlight.colorTemp = light.color;\r\n\t\t}\r\n\t\tif (\"alpha\" in light) {\r\n\t\t\talpha = light.alpha;\r\n\t\t} \r\n\t\tif (light.mode == \"follow\"){\r\n\t\t\talpha = this.props.opacity;\r\n\t\t}\r\n\r\n\t\tif (!(\"background\" in light)) {\r\n\t\t\tlight.direction = light.mode == \"blink\" ? \"alternate\" : \"normal\";\r\n\t\t\tlight.loop = light.mode == \"light\" ? light.loopTime : light.loopTime*2;\r\n\t\t}\r\n\t\tlight.background = `rgba(${light.colorTemp},${alpha})`;\r\n\t\t//console.log(light.background);\r\n\t\t//TODO: if mode == follow\r\n\r\n\t\t//delete light.mode;\r\n\t\tdelete light.loopTime;\r\n\t\tdelete light.color;\r\n\t\tdelete light.alpha;\r\n\t\t\r\n\t\treturn light;\r\n\t}\r\n\r\n\tgenRgbStyle(colorStr, stiffness) {\r\n\t\tlet bg = colorStr;\r\n\t  \tlet bgColor = bg.substring(5, bg.length-1).split(\",\");\r\n\t  \tconst config = {stiffness: stiffness, damping: 30}; // 70, 20\r\n\t  \treturn {\r\n\t  \t\tstyle: {\r\n\t\t  \t\tr: spring(parseFloat(bgColor[0]),config),\r\n\t\t  \t\tg: spring(parseFloat(bgColor[1]),config),\r\n\t\t  \t\tb: spring(parseFloat(bgColor[2]),config),\r\n\t\t  \t\ta: spring(parseFloat(bgColor[3]),config),\r\n\t\t  \t}, \r\n\t\t  \tmotionFunc: this.rgbMotion\r\n\t\t  }\r\n\t  \t\r\n\t}\r\n\r\n\trgbMotion({r, g, b, a}) {\r\n    \t//console.log(r,g,b,a);\r\n        return (\r\n        \t<div id=\"lightBox\" key={Date.now()}\r\n\t          style={{\r\n\t            background:`rgba(${Math.floor(r)},${Math.floor(g)},${Math.floor(b)},${a})`\r\n\t          }}>\r\n          </div>);\r\n    }\r\n\r\n\tgenHslStyle(colorStr) {\r\n\t\tlet bg = colorStr;\r\n\t  \tlet bgColor = bg.substring(5, bg.length-1).split(\",\");\r\n\t  \tconst config = {stiffness: 80, damping: 20};\r\n\t\tlet {h,s,l} = rgbToHsl(parseFloat(bgColor[0]), parseFloat(bgColor[1]), parseFloat(bgColor[2]));\r\n\t  \treturn {\r\n\t  \t\tstyle: {\r\n\t\t  \t\th: spring(h,config),\r\n\t\t  \t\ts: spring(s,config),\r\n\t\t  \t\tl: spring(l,config),\r\n\t\t  \t\ta: spring(parseFloat(bgColor[3]),config),\r\n\t\t  \t},\r\n\t\t  \tmotionFunc: this.hslMotion\r\n\t\t}\r\n\t  \t//console.log(hslStyle);\r\n\t}\r\n\r\n\thslMotion({h, s, l, a}) {\r\n    \t//console.log(h,s,l,a);\r\n        return (\r\n        \t<div id=\"lightBox\" key={Date.now()}\r\n\t       \r\n\t          style={{\r\n\t            background:`hsla(${h*360},${s*100}%,${l*100}%,${a})`\r\n\t          }}>\r\n          </div>);\r\n    }\r\n\r\n\trender () {\r\n\t\t//console.log(`<render> animBOX`);\r\n\t\tlet {defaultProp} = this.state;\r\n\t\t\r\n\t\tlet lightProp = this.computeData(this.props.data);\r\n\t\tlet animeProp = Object.assign(defaultProp, lightProp);\r\n\t\t//console.log(`<render animebox> ${JSON.stringify(animeProp)}`);\r\n\t\t\r\n\t\t//TODO: change rgb type\r\n\t\t//animeProp.background\r\n\t\tlet {style, motionFunc} = this.genRgbStyle(animeProp.background, animeProp.duration);\r\n\t\t//let {style, motionFunc} = this.genHslStyle(this.props.opa);\r\n\t\t//console.log(animeProp.duration);\r\n\t  \tlet motion = (\r\n\t  \t\t<Motion style={style}>\r\n\t  \t\t\t{motionFunc}\r\n        \t</Motion>);\r\n\t  \t\r\n\t  \tlet anime = (\r\n\t\t\t<Anime key={Date.now()} {...animeProp}>\r\n\t\t        <div id=\"lightBox\"></div>\r\n      \t\t</Anime>);\r\n\r\n\t  \t//return motion;\r\n\t  \t//console.log(animeProp.mode == \"blink\"? \"anime\" : \"motion\")\r\n\t  \treturn animeProp.mode == \"blink\"? anime : motion;\r\n\t  \t\t\r\n\t}\r\n\r\n}\r\n\r\nconst colorInterpolate = (startValue, endValue, percentage) => {\r\n\treturn (endValue - startValue) * percentage + startValue;\r\n}\r\n\r\nexport default AnimeBox;","import React, {useState, useEffect} from 'react';\r\nimport {onSocket} from '../usages/socketUsage';\r\nimport * as Tone from 'tone'\r\nimport AnimeBox from './AnimeBox';\r\n\r\nlet soundStateNum = [];\r\nlet soundFiles = [];\r\nlet soundPlayer = [];\r\nconst importSoundFiles = () => {\r\n    let context = require.context(`../sounds/`, true, /\\.(mp3)$/);\r\n    let count = 0;\r\n    let prev = '';\r\n    context.keys().forEach((filename)=>{\r\n        //console.log(context(filename), count);\r\n        if (filename.slice(0,4) !== prev) {\r\n            prev = filename.slice(0,4);\r\n            soundStateNum.push(count);\r\n        }\r\n        count ++;\r\n        soundFiles.push(context(filename));\r\n    });\r\n    soundStateNum.push(count);\r\n    console.log(soundStateNum);\r\n}\r\nconst soundPreload = () => {\r\n\tconsole.log('soundPreload', soundStateNum[soundStateNum.length-2]);\r\n\t//var meter = new Tone.Meter('level');\r\n\t//var fft = new Tone.Analyser('fft', 64);\r\n\t//var waveform = new Tone.Analyser('waveform', 32);\r\n\t//var soundPlayer = [];\r\n    soundFiles.forEach((value, ind)=> {\r\n        var temp = new Tone.Player({\r\n\t\t\t\"url\": value,\r\n\t\t\t\"fadeOut\": ind < soundStateNum[4] ? 5 : 0,\r\n            \"fadeIn\": ind < soundStateNum[4] ? 5 : 0\r\n        }).toMaster();\r\n\t\t\t//}).connect(meter).connect(waveform).connect(fft).toMaster();\r\n\t\tsoundPlayer.push(temp);\r\n    });\r\n    return soundPlayer;\r\n\t//return {meter: meter, fft: fft, waveform: waveform, soundPlayer:soundPlayer};\r\n}\r\nimportSoundFiles();\r\nsoundPreload();\r\n\r\nfunction MusicBoxMin(props) {\r\n    //const [soundPlayer] = useState(soundPreload());\r\n    const [nowOrder, setNowOrder] = useState(0);\r\n    const [refresh, setRefresh] = useState(false);\r\n    \r\n    let processData = (data) => {\r\n        //let {sound} = data;\r\n        if (data.sound) processSound(data.sound);\r\n    }\r\n    useState(()=>{\r\n        if (props.socket)\r\n            onSocket('controlData', processData);\r\n    })\r\n    \r\n    let loadFinish = () => {\r\n\t\tconsole.log('load Finished!');\r\n    }\r\n    //TODO: handle loading?\r\n    useEffect(()=>{\r\n        //Tone.Buffer.on('load', loadFinish);\r\n        Tone.Buffer.onload=loadFinish;\r\n    },[soundPlayer])\r\n\r\n    useEffect(()=>{\r\n        if (props.stop) {\r\n            stopAll();\r\n        }\r\n    },[props.stop])\r\n\r\n    useEffect(()=>{\r\n        if (props.refresh != refresh && props.data && JSON.stringify(props.data) !== '{}' ){\r\n            processSound(props.data);\r\n        }\r\n        setRefresh(props.refresh);\r\n    }, [props.refresh])\r\n\r\n    let processSound = (data) => {\r\n        if (props.stop) return;\r\n\r\n        //console.log(data);\r\n        if (data.stop && data.stop !== '*') {\r\n            stopAll();\r\n            return;\r\n        }\r\n        let order = -1;\r\n        if (data.set && data.set < soundStateNum.length) {\r\n            order = Math.floor(Math.random() * (soundStateNum[data.set] - soundStateNum[data.set-1]));\r\n            order += soundStateNum[data.set-1];\r\n        } else if ('order' in data) {\r\n            if (data.orderTo && data.orderTo > data.order) {\r\n                order = Math.floor(Math.random() * (data.orderTo - data.order));\r\n                order += data.order;\r\n            } else order = data.order;\r\n        }\r\n        if (order >= 0) {\r\n            stopNow();\r\n            //console.log('o', order);\r\n            if ('volume' in data) setVolume(order, data.volume);\r\n            if ('delayFix' in data) {\r\n                setTimeout(() => {\r\n                    playSound(order);\r\n                }, data.delayFix);\r\n            } else if (data.delay > 0) {\r\n                setTimeout(() => {\r\n                    playSound(order);\r\n                }, Math.floor(Math.random()*data.delay));\r\n            } else playSound(order);\r\n        }   \r\n        else if ('volume' in data) {\r\n            if (soundPlayer[nowOrder] && soundPlayer[nowOrder].state !== 'stopped') {\r\n                setVolume(nowOrder, data.volume);\r\n            }\r\n        }\r\n    }\r\n\r\n    let stopNow = () => {\r\n        if (soundPlayer[nowOrder] && soundPlayer[nowOrder].loaded && soundPlayer[nowOrder].state !== 'stopped') {\r\n            soundPlayer[nowOrder].stop();\r\n        }\r\n    }\r\n\r\n    let stopAll = () => {\r\n\t\tsoundPlayer.forEach((e) => {\r\n\t\t\tif (e !== undefined) {\r\n\t\t\t\tif (e.loaded && e.state !== 'stopped') e.stop();\r\n\t\t\t} \r\n        }) \r\n        setNowOrder(0);\r\n    }\r\n    \r\n    let playSound = (order) => {\r\n        //console.log(order);\r\n\t\tif (soundPlayer[order] !== undefined) {\r\n\t\t\tif (soundPlayer[order].loaded) {\r\n                console.log(order, 'played!');\r\n                soundPlayer[order].start();\r\n                setNowOrder(order);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(order+' not loaded!');\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n    let setVolume = (order, volume) =>{\r\n        if (soundPlayer[order] && soundPlayer[order].loaded) soundPlayer[order].volume.value = volume;\r\n    }\r\n    \r\n    let randomPlay = () => {\r\n        let order = Math.floor(Math.random() * (soundStateNum[1] - soundStateNum[0]));\r\n            order += soundStateNum[0];\r\n        playSound(order);\r\n    }\r\n\r\n    return(<></>);\r\n}\r\n\r\nexport default MusicBoxMin;","import React, {Component} from 'react';\r\nimport AnimeBox from './AnimeBox';\r\n// import MusicBox from './MusicBox';\r\nimport {connectSocket, onSocket} from '../usages/socketUsage';\r\nimport Fade from './Fade';\r\nimport MusicBoxMin from './MusicBox';\r\n\r\nconst rgbColors = [\"255, 255, 255\"];\r\n\r\nconst inArrRange = (num, len) => {\r\n\t//console.log(num >= 0 && num < len);\r\n\treturn num >= 0 && num < len;\r\n}\r\n\r\nconst genUUID = () => {\r\n\tvar d = Date.now();\r\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\r\n        d += performance.now(); //use high-precision timer if available\r\n    }\r\n    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        var r = (d + Math.random() * 16) % 16 | 0;\r\n        d = Math.floor(d / 16);\r\n        return (c === 'x' ? r : ((r & 0x3) | 0x8)).toString(16);\r\n    });\r\n    sessionStorage.setItem(\"StageEffectUUID\", uuid);\r\n    return uuid;\r\n}\r\n\r\nconst jsonCopy = (jsonObj) => {\r\n  return JSON.parse(JSON.stringify(jsonObj));\r\n}\r\n\r\n//props: show, stop\r\nclass EffectBox extends Component {\r\n\r\n\tstate = {\r\n    \tuuid: sessionStorage.getItem(\"StageEffectUUID\") || genUUID(),\r\n        refreshAnime: false,\r\n        refreshMusic: false,\r\n        socketData: {},\r\n        lightData: {},\r\n        soundData: {},\r\n        //opa: \"rgba(0,0,0,1)\",\r\n        opa: -1,\r\n        opacity: 0,\r\n    };\r\n\r\n    componentDidMount() {\r\n\r\n        // this.setState({\r\n\t\t// \tsocket: connectSocket('/receiver', this.socketConnectFn)\r\n        // })\r\n        onSocket('controlData', this.receiveControlData.bind(this))\r\n        \r\n\t}\r\n\t\r\n\t// socketConnectFn = () => {\r\n\t// \tlet {socket} = this.state;\r\n\t// \tconsole.log('receiver connected to server');\r\n\t// \tconsole.log(this.state.uuid);\r\n\t// \tconsole.log(socket);\r\n\t// \tsocket.emit('connected', {\r\n\t// \t\tuuid: this.state.uuid\r\n\t// \t});\r\n\r\n\t// \t //this.setupBeforeUnloadListener(socket);\r\n\t// \tthis.setState({socketID: socket.id});\r\n\t// \t socket.on('debug', (data) => {\r\n\t// \t\t console.log(`<socket> ${data}`);\r\n\t// \t })\r\n\r\n\t// \tsocket.on('controlData', this.receiveControlData.bind(this));\r\n\t\t\r\n\t// }\r\n\r\n    receiveControlData(data) {\r\n \t\t// console.log(`<data> ${JSON.stringify(data)}`);\r\n \t\t\r\n \t\tlet {light, sound} = this.handleSocketData(data);\r\n \t\t//console.log(`<sound data>  ${JSON.stringify(sound)}`)\r\n \t\tif (JSON.stringify(sound) !== \"{}\") {\r\n \t\t\tthis.setState((prevState) => ({\r\n\t \t\t\tsoundData: jsonCopy(sound),\r\n\t \t\t\trefreshMusic: !prevState.refreshMusic,\r\n\t\t\t}));\r\n \t\t}\r\n \t\tif (JSON.stringify(light) !== \"{}\") {\r\n \t\t\tthis.setState((prevState) => ({\r\n \t\t\t\tsoundData: jsonCopy(sound),\r\n\t \t\t\tlightData: jsonCopy(light),\r\n\t \t\t\trefreshAnime: !prevState.refreshAnime,\r\n\t\t\t\t\r\n\t\t\t}));\r\n \t\t}\r\n    }\r\n\r\n    handleSocketData(data) {\r\n    \t//console.log(rgbColors);\r\n    \tvar sound = 'sound' in data && data.sound !== '*' ? data.sound : {};\r\n        var light = 'light' in data && data.light !== '*'? this.handleLightData(data.light) : {};\r\n    \t \r\n    \t//console.log(`<sound in handleSocketData> ${JSON.stringify(sound)}`);\r\n    \t//console.log(`<light> ${JSON.stringify(light)}`);\r\n\r\n    \tif (!(\"color\" in light) && JSON.stringify(light) !== \"{}\" && \"order\" in sound) {\r\n    \t\t//console.log(`color: ${rgbColors[sound.order % rgbColors.length]}`);\r\n    \t\tlight.color = rgbColors[sound.order % rgbColors.length];\r\n    \t}\r\n    \tif (\"color\" in light && \"order\" in sound) {\r\n    \t\tif (light.color === \"*\") {\r\n    \t\t\t//console.log(`color: ${rgbColors[sound.order % rgbColors.length]}`);\r\n    \t\t\tlight.color = rgbColors[sound.order % rgbColors.length];\r\n    \t\t}\r\n    \t}\r\n    \tif (\"delay\" in light && \"order\" in sound) {\r\n    \t\tsound.delayFix = light.delay;\r\n\r\n    \t}\r\n    \tif (\"mode\" in light && \"order\" in sound) {\r\n    \t\tsound.mode = light.mode;\r\n\r\n    \t}\r\n    \tif (\"mode\" in light && \"stop\" in sound) {\r\n    \t\tif (light.mode === \"follow\") light = {};\r\n    \t}\r\n    \t// TODO: if color mode == follow ? \r\n\r\n    \treturn {light: light, sound: sound};\r\n    }\r\n\r\n    // handleSoundData(sound) {\r\n    // \t//if order not in range => no sound!\r\n    // \t//console.log(`<handleSoundData> ${sound.order}`);\r\n\r\n    // \tif (!inArrRange(sound.order, soundFileNum)) {\r\n    // \t\tif (!('volume' in sound))\r\n    // \t\t\treturn {};\r\n    // \t\telse {\r\n    // \t\t\tdelete sound.order;\r\n    // \t\t\treturn sound;\r\n    // \t\t}\r\n    // \t}\r\n\r\n    // \t// if orderTo not in range or < order: to order\r\n    // \tif (!inArrRange(sound.orderTo, soundFileNum+1) \r\n    // \t\t|| sound.orderTo < sound.order) {\r\n\t// \t\tsound.orderTo = sound.order;\r\n\t// \t}\r\n\t\t\r\n    // \t//calculate random\r\n\t//     sound.order = sound.order + \r\n\t//     \t\tMath.floor(Math.random()*(sound.orderTo-sound.order));\r\n\t//     //console.log(`order ${sound.order}`); \r\n\r\n\t//     if (\"stop\" in sound) {\r\n    // \t\tif (sound.stop === \"*\") delete sound.stop;\r\n    // \t}\r\n\t//     return sound;\r\n    // }\r\n\r\n    handleLightData(light) {\r\n    \tif (light.mode === \"none\") return {};\r\n    \tif (\"color\" in light) {\r\n    \t\tif (light.color === \"*\") delete light.color;\r\n    \t}\r\n    \tlight.delay = Math.random()*light.delay;\r\n    \treturn light;\r\n    }\r\n\r\n    changeHandler(v) {\r\n    \t//console.log(`changeHandler: ${v}`);\r\n    \tthis.setState({opacity: v});\r\n    }\r\n\r\n\trender(){\r\n\t\t//console.log('render');\r\n\t\tlet {refreshAnime, refreshMusic, lightData, soundData, opacity} = this.state;\r\n\r\n\t\treturn(\r\n\t\t\t<div id=\"wrap\">\r\n\t\t\t\t<Fade show={this.props.show}>\r\n\t\t\t\t\t<AnimeBox refresh={refreshAnime} data={lightData} \r\n\t\t\t\t\topacity={opacity}></AnimeBox>\r\n\t\t\t\t</Fade>\r\n                <MusicBoxMin stop={this.props.stop} refresh={refreshMusic} data={soundData}/>\r\n\t\t\t\t{/* <MusicBox show={this.props.show} refresh={refreshMusic} data={soundData} onChange={this.changeHandler.bind(this)} parent={this}></MusicBox> */}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tsetupBeforeUnloadListener = (socket) => {\r\n        window.addEventListener(\"beforeunload\", (event) => {\r\n            event.preventDefault();\r\n            socket.emit('disconnected', {\r\n\t\t        uuid: this.state.uuid\r\n\t    \t})\r\n\t    \treturn event;\r\n        });\r\n    };\r\n\r\n    clickButton = () => {\r\n    \t//console.log(`click ${this.state.refreshAnime}`);\r\n    \t//var r = Math.floor(Math.random()*255);\r\n    \t//var g = Math.floor(Math.random()*255);\r\n    \t//var b = Math.floor(Math.random()*255);\r\n    \t//testPlayer[0].start();\r\n    \tif (JSON.stringify(this.state.soundData) != \"{}\") {\r\n    \t\tthis.setState((prevState) => ({\r\n\t\t\t\trefreshMusic: !prevState.refreshMusic,\r\n\t\t\t}));\r\n    \t}\r\n    \tif (JSON.stringify(this.state.lightData) != \"{}\") {\r\n    \t\tthis.setState((prevState) => ({\r\n\t\t\t\trefreshAnime: !prevState.refreshAnime,\r\n\t\t\t}));\r\n    \t}\r\n  //   \tthis.setState((prevState) => ({\r\n\t\t// \trefreshAnime: !prevState.refreshAnime,\r\n\t\t// \trefreshMusic: !prevState.refreshMusic,\r\n\t\t// \t//opa: `rgba(${r},${b},${b},1)`\r\n\t\t// \t//opa: `rgba(255,255,0,1)`\r\n\t\t// \topa: prevState.opa*10\r\n\t\t// }));\r\n\t\t//console.log(rgbColors);\r\n    }\r\n}\r\n\r\nexport default EffectBox;\r\n","import React, {useState, useEffect} from 'react';\r\nimport {connectSocket, onSocket, emitData } from '../usages/socketUsage';\r\nimport Speak from './Speak';\r\nimport {useInterval} from '../usages/tool';\r\nimport Fade from './Fade';\r\nimport {FullDiv} from '../usages/cssUsage';\r\nimport MusicBoxMin from './MusicBox';\r\nimport EffectBox from './EffectBox';\r\n\r\n\r\nfunction SocketHandler(props) {\r\n    const [speak, setSpeak] = useState(false);\r\n    const [id, setId] = useState(-1);\r\n    const [changeVoice, setChangeVoice] = useState(false);\r\n    const [launch, setLaunch] = useState(false);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [speakData, setSpeakData] = useState({});\r\n    const [voice, setVoice] = useState(); \r\n    const [socketConnect, setSocketConnect] = useState(null);\r\n    const [nowSpeak, setNowSpeak] = useState([]);\r\n\r\n    useEffect(()=>{\r\n        //if (props.start && socketConnect) {\r\n        if (socketConnect) {\r\n            changeVoiceEffect();\r\n        }\r\n    }, [socketConnect])\r\n\r\n    //check if user changed\r\n    useEffect(() => {\r\n        if (!launch && voice) {\r\n            console.log('emit voice!');\r\n            emitData('speakConfig', {mode: 'changeVoice', voice: voice});\r\n        }\r\n    }, [launch, voice])\r\n\r\n    useState(()=> {\r\n        connectSocket('/receiver', ()=>{setSocketConnect(true);});\r\n        onSocket('disconnect', ()=>{\r\n            setSocketConnect(false);\r\n        })\r\n        onSocket('debug', (data)=> {\r\n            console.log(data);\r\n            if (data.mode === 'showForm') \r\n                setShowForm(data.value);\r\n        }); \r\n        onSocket('speak', (data)=> {\r\n            \r\n            if (!speak) {\r\n                console.log('speak!', data);\r\n                //setSentence(data.text);\r\n                setSpeakData(data);\r\n                setId(data.id);\r\n                setSpeak(true);\r\n            }\r\n            //TODO: if speak -> do something?   \r\n        });\r\n        onSocket('speakConfig', (data)=> {\r\n            console.log(data);\r\n            if (data.mode === 'changeVoice') \r\n                changeVoiceEffect();\r\n            else if (data.mode === 'showForm')\r\n                setShowForm(true);\r\n            else if (data.mode === 'hideForm') \r\n                setShowForm(false);\r\n            else if (data.mode === 'nowSpeak')\r\n                setNowSpeak(data.data);\r\n        }); \r\n        \r\n    });\r\n\r\n    useInterval(() => {\r\n        setChangeVoice(!changeVoice);\r\n    }, launch ? 100 : null);\r\n\r\n    let changeVoiceEffect = () => {\r\n        setLaunch(true);\r\n        setTimeout(()=>{\r\n            setLaunch(false);\r\n        }, 2000);\r\n    }\r\n\r\n    let sendDebug = () => {\r\n        emitData('debug', 'testing');\r\n    }\r\n    let sendChangeVoice = () => {\r\n        console.log('send change voice');\r\n        setChangeVoice(!changeVoice);\r\n    }\r\n    let speakOver = () => {\r\n        setSpeak(false);\r\n        console.log('speak over', id);\r\n        //emitData('debug', {id: id});\r\n        if (id !== -1)\r\n            emitData('speakOver', {id: id, voice: voice});\r\n    }\r\n    let changeVoiceCallback = (voice) => {\r\n        setVoice(voice);\r\n    }\r\n    \r\n    return (<>\r\n        {/* <button onClick={t}></button> */}\r\n        {/* <EffectBox controlData={controlData}/> */}\r\n        {/* <MusicBoxMin stop={speak}/> */}\r\n        <EffectBox show={socketConnect && !speak} stop={speak} />\r\n        <Fade show={socketConnect}>\r\n            <Speak toSpeak={speak} data={speakData} speakOver={speakOver} \r\n                    changeVoice={changeVoice} changeVoiceCallback={changeVoiceCallback}\r\n                    nowSpeak={nowSpeak} form={showForm}/>\r\n        </Fade>\r\n        <Fade show={socketConnect===false}>\r\n            <FullDiv bgColor=\"black\"><span>{'CONNECTING SERVER'}</span></FullDiv>\r\n        </Fade>\r\n        \r\n    </>);\r\n}\r\n\r\nexport default SocketHandler;","import React from 'react';\r\nimport '../css/LandPage.css';\r\n//import ReactHtmlParser from 'react-html-parser'; \r\n\r\nfunction LandPage(props) {\r\n    return (\r\n        <div id='LandpageWrapper'>\r\n            <button className='selectBtn' onClick={props.select}>Start</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LandPage;","import React, {useState} from 'react';\r\nimport '../css/App.css';\r\nimport SocketHandler from './SocketHandler';\r\nimport LandPage from './LandPage';\r\nimport Fade from './Fade';\r\nimport * as Tone from 'tone';\r\n\r\nfunction App() {\r\n  const [landing, setLanding] = useState(true);\r\n  const [speak, setSpeak] = useState(false);\r\n  let selectStart= () => {\r\n    setLanding(false);\r\n    setSpeak(true);\r\n\r\n    //not sure where to put this...\r\n    window.speechSynthesis.speak(new SpeechSynthesisUtterance(''));\r\n    const synth = new Tone.Synth();\r\n    synth.oscillator.type = \"sine\";\r\n    synth.toMaster();\r\n    synth.triggerAttack(\"C4\");\r\n    setTimeout(()=>{synth.triggerRelease();}, 100);\r\n  }\r\n  return (\r\n  <div>\r\n    <Fade show={landing}>\r\n      <LandPage select={selectStart}/>\r\n    </Fade>\r\n    <Fade show={speak}>\r\n      <SocketHandler start={speak}/>\r\n    </Fade>\r\n    {/* <Speak /> */}\r\n  </div>);\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './css/index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}